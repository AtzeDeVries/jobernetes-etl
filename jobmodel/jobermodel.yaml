---
jobernetes_config:
  cleanup: False
  refresh_time: 20
  ssl_insecure_warnings: False
  incluster: True
  parallelization: 4
jobernetes:
  - phase_name: bootstrap
    jobs:
      - name: create_indices
        job_path: jobernetes-etl/0-prepare/etl-bootstrap.yaml

  - phase_name: import_source_systems
    jobs:
      #downloads
      - name: download_medialib
        job_path: jobernetes-etl/1-source-import/downloads/download-medialib.yaml
      - name: download_brahms
        job_path: jobernetes-etl/1-source-import/downloads/download-brahms.yaml
      - name: download_col
        job_path: jobernetes-etl/1-source-import/downloads/download-col.yaml
      - name: download_crs
        job_path: jobernetes-etl/1-source-import/downloads/download-crs.yaml
      - name: download_nsr
        job_path: jobernetes-etl/1-source-import/downloads/download-nsr.yaml
      - name: download_geo
        job_path: jobernetes-etl/1-source-import/downloads/download-geo.yaml
      #brahms import
      - name: import_brahms_amd
        job_path: jobernetes-etl/1-source-import/brahms/amd
        type: directory
        depends_on:
          - download_brahms
          - download_medialib
      - name: import_brahms_l
        job_path: jobernetes-etl/1-source-import/brahms/l
        type: directory
        depends_on:
          - download_brahms
          - download_medialib
      - name: import_brahms_u
        job_path: jobernetes-etl/1-source-import/brahms/u
        type: directory
        depends_on:
          - import_brahms_l
      - name: import_brahms_wag
        job_path: jobernetes-etl/1-source-import/brahms/wag
        type: directory
        depends_on:
          - import_brahms_u
      #import crs
      - name: import_crs_sp
        job_path: jobernetes-etl/1-source-import/crs/etl-job-crs-specimens.yaml
        depends_on:
          - download_crs
          - download_medialib
      - name: import_crs_mm
        job_path: jobernetes-etl/1-source-import/crs/etl-job-crs-multimedia.yaml
        depends_on:
          - download_crs
          - download_medialib
      #import col
      - name: import_col
        job_path: jobernetes-etl/1-source-import/col/etl-job-col.yaml
        depends_on:
          - download_col
          - download_medialib
      #import geo
      - name: import_geo
        job_path: jobernetes-etl/1-source-import/geo/etl-job-geo.yaml
        depends_on:
          - download_geo
          - download_medialib
      #import nsr
      - name: import_nsr
        job_path: jobernetes-etl/1-source-import/nsr/etl-job-nsr.yaml
        depends_on:
          - download_nsr
          - download_medialib


  - phase_name: enrichment
    jobs:
      - name: enrichment_jobs
        type: directory
        job_path: jobernetes-etl/2-enrich

  - phase_name: extend
    jobs:
      - name: extend_data
        job_path: jobernetes-etl/3-extend/etl-job-storageunits.yaml

  - phase_name: post_jobs
    jobs:
      - name: force_merge
        job_path: jobernetes-etl/4-postjobs/etl-forcemerge.yaml
