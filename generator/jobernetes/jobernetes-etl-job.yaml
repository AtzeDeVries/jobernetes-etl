---
apiVersion: batch/v1
kind: Job
metadata:
  name: jobernetes-etl
  labels:
    app: jobernetes-etl
spec:
  template:
    metadata:
      name: jobernetes-etl
      labels:
        app: jobernetes-etl
    spec:
      serviceAccountName: jobernetes
      restartPolicy: Never
      containers:
      - name: jobernetes-etl
        image: atzedevries/jobernetes:v0.0.5
        command: ["/bin/sh"]
        args:
          - "-c"
          - >
            apk add --no-cache git
            && git clone https://github.com/naturalis/jobernetes-etl --branch test-0.0.0
            && cp jobernetes-etl/jobmodel/jobermodel.yaml ./
            && python jobernetes.py
